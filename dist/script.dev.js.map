{"version":3,"sources":["script.js"],"names":["require","config","express","axios","cors","app","PORT","use","json","get","req","res","cuisine","query","lat","lng","status","error","params","q","format","lon","limit","addressdetails","response","data","length","restaurants","map","restaurant","name","display_name","address","link","console","listen","log"],"mappings":";;AAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,IAAMC,OAAO,GAAGF,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMG,KAAK,GAAGH,OAAO,CAAC,OAAD,CAArB;;AACA,IAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAD,CAApB,C,CAA8B;;;AAE9B,IAAMK,GAAG,GAAGH,OAAO,EAAnB;AACA,IAAMI,IAAI,GAAG,IAAb;AAEAD,GAAG,CAACE,GAAJ,CAAQH,IAAI,EAAZ,E,CAAiB;;AACjBC,GAAG,CAACE,GAAJ,CAAQL,OAAO,CAACM,IAAR,EAAR;AAEAH,GAAG,CAACI,GAAJ,CAAQ,iBAAR,EAA2B,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,UAAAA,OADe,GACHF,GAAG,CAACG,KADD,CACfD,OADe;AAEjBE,UAAAA,GAFiB,GAEX,SAFW,EAEA;;AACjBC,UAAAA,GAHiB,GAGX,SAHW,EAGA;;AAHA,cAKlBH,OALkB;AAAA;AAAA;AAAA;;AAAA,2CAMZD,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB;AAAES,YAAAA,KAAK,EAAE;AAAT,WAArB,CANY;;AAAA;AAAA;AAAA;AAAA,0CAUId,KAAK,CAACM,GAAN,CAAU,4CAAV,EAAwD;AAC3ES,YAAAA,MAAM,EAAE;AACJC,cAAAA,CAAC,YAAKP,OAAL,gBADG;AAEJQ,cAAAA,MAAM,EAAE,MAFJ;AAGJN,cAAAA,GAAG,EAAHA,GAHI;AAIJO,cAAAA,GAAG,EAAEN,GAJD;AAKJO,cAAAA,KAAK,EAAE,CALH;AAMJC,cAAAA,cAAc,EAAE;AANZ;AADmE,WAAxD,CAVJ;;AAAA;AAUbC,UAAAA,QAVa;;AAAA,gBAsBfA,QAAQ,CAACC,IAAT,CAAcC,MAAd,KAAyB,CAtBV;AAAA;AAAA;AAAA;;AAAA,2CAuBRf,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB;AAAES,YAAAA,KAAK,EAAE;AAAT,WAArB,CAvBQ;;AAAA;AA0BbU,UAAAA,WA1Ba,GA0BCH,QAAQ,CAACC,IAAT,CAAcG,GAAd,CAAkB,UAAAC,UAAU;AAAA,mBAAK;AACjDC,cAAAA,IAAI,EAAED,UAAU,CAACE,YADgC;AAEjDC,cAAAA,OAAO,EAAEH,UAAU,CAACG,OAF6B;AAGjDlB,cAAAA,GAAG,EAAEe,UAAU,CAACf,GAHiC;AAIjDO,cAAAA,GAAG,EAAEQ,UAAU,CAACR,GAJiC;AAKjDY,cAAAA,IAAI,gDAAyCJ,UAAU,CAACf,GAApD,mBAAgEe,UAAU,CAACR,GAA3E,qBAAyFQ,UAAU,CAACf,GAApG,cAA2Ge,UAAU,CAACR,GAAtH;AAL6C,aAAL;AAAA,WAA5B,CA1BD;AAkCnBV,UAAAA,GAAG,CAACH,IAAJ,CAASmB,WAAT;AAlCmB;AAAA;;AAAA;AAAA;AAAA;AAqCnBO,UAAAA,OAAO,CAACjB,KAAR,CAAc,oBAAd;AACAN,UAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB;AAAES,YAAAA,KAAK,EAAE;AAAT,WAArB;;AAtCmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;AA0CAZ,GAAG,CAAC8B,MAAJ,CAAW7B,IAAX,EAAiB;AAAA,SAAM4B,OAAO,CAACE,GAAR,yHAAkD9B,IAAlD,EAAN;AAAA,CAAjB","sourcesContent":["require(\"dotenv\").config();\r\nconst express = require(\"express\");\r\nconst axios = require(\"axios\");\r\nconst cors = require(\"cors\"); // Импортируем CORS\r\n\r\nconst app = express();\r\nconst PORT = 3000;\r\n\r\napp.use(cors()); // Используем CORS\r\napp.use(express.json());\r\n\r\napp.get(\"/api/restaurant\", async (req, res) => {\r\n    const { cuisine } = req.query;\r\n    const lat = '54.6872'; // Широта Вильнюса\r\n    const lng = '25.2797'; // Долгота Вильнюса\r\n\r\n    if (!cuisine) {\r\n        return res.status(400).json({ error: \"Необходим параметр cuisine.\" });\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(\"https://nominatim.openstreetmap.org/search\", {\r\n            params: {\r\n                q: `${cuisine} restaurant`,\r\n                format: \"json\",\r\n                lat,\r\n                lon: lng,\r\n                limit: 5, \r\n                addressdetails: 1,\r\n            },\r\n        });\r\n\r\n       \r\n        if (response.data.length === 0) {\r\n            return res.status(404).json({ error: \"Рестораны не найдены.\" });\r\n        }\r\n\r\n        const restaurants = response.data.map(restaurant => ({\r\n            name: restaurant.display_name,\r\n            address: restaurant.address,\r\n            lat: restaurant.lat,\r\n            lon: restaurant.lon,\r\n            link: `https://www.openstreetmap.org/?mlat=${restaurant.lat}&mlon=${restaurant.lon}#map=16/${restaurant.lat}/${restaurant.lon}`,\r\n        }));\r\n\r\n        res.json(restaurants);\r\n\r\n    } catch (error) {\r\n        console.error(\"Ошибка при поиске:\", error);\r\n        res.status(500).json({ error: \"Ошибка сервера.\" });\r\n    }\r\n});\r\n\r\napp.listen(PORT, () => console.log(`Сервер запущен на http://localhost:${PORT}`));\r\n"],"file":"script.dev.js"}
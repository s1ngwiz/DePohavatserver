"use strict";require("dotenv").config();var express=require("express"),axios=require("axios"),cors=require("cors"),app=express(),PORT=3e3;app.use(cors()),app.use(express.json()),app.get("/api/restaurant",function(r,t){var a,n,s,o,c,u,p;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.query.cuisine,n=54.55,s=54.75,o=25.15,c=25.45,a){e.next=7;break}return e.abrupt("return",t.status(400).json({error:"Необходим параметр cuisine."}));case 7:return e.prev=7,e.next=10,regeneratorRuntime.awrap(axios.get("https://www.google.com/maps/search",{params:{q:"".concat(a," restaurant"),format:"json",addressdetails:1,limit:1,viewbox:"".concat(o,",").concat(n,",").concat(c,",").concat(s),bounded:1}}));case 10:if(0===(u=e.sent).data.length)return e.abrupt("return",t.status(404).json({error:"Рестораны не найдены."}));e.next=13;break;case 13:p=u.data.map(function(e){return{name:e.display_name,address:e.address,lat:e.lat,lon:e.lon,link:"https://www.openstreetmap.org/?mlat=".concat(e.lat,"&mlon=").concat(e.lon,"#map=16/").concat(e.lat,"/").concat(e.lon)}}),t.json(p),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(7),console.error("Ошибка при поиске:",e.t0),t.status(500).json({error:"Ошибка сервера."});case 21:case"end":return e.stop()}},null,null,[[7,17]])}),app.listen(PORT,function(){return console.log("Сервер запущен на http://localhost:".concat(PORT))});
//# sourceMappingURL=script.min.js.map

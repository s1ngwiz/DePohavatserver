"use strict";require("dotenv").config();var express=require("express"),axios=require("axios"),cors=require("cors"),app=express(),PORT=3e3;app.use(cors()),app.use(express.json()),app.get("/api/restaurant",function(r,t){var a,n,s,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.query.cuisine,n="54.6872",s="25.2797",a){e.next=5;break}return e.abrupt("return",t.status(400).json({error:"Необходим параметр cuisine."}));case 5:return e.prev=5,e.next=8,regeneratorRuntime.awrap(axios.get("https://nominatim.openstreetmap.org/search",{params:{q:"".concat(a," restaurant"),format:"json",lat:n,lon:s,limit:5,addressdetails:1}}));case 8:if(0===(o=e.sent).data.length)return e.abrupt("return",t.status(404).json({error:"Рестораны не найдены."}));e.next=11;break;case 11:c=o.data.map(function(e){return{name:e.display_name,address:e.address,lat:e.lat,lon:e.lon,link:"https://www.openstreetmap.org/?mlat=".concat(e.lat,"&mlon=").concat(e.lon,"#map=16/").concat(e.lat,"/").concat(e.lon)}}),t.json(c),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),console.error("Ошибка при поиске:",e.t0),t.status(500).json({error:"Ошибка сервера."});case 19:case"end":return e.stop()}},null,null,[[5,15]])}),app.listen(PORT,function(){return console.log("Сервер запущен на http://localhost:".concat(PORT))});
//# sourceMappingURL=script.min.js.map

"use strict";require("dotenv").config();var express=require("express"),axios=require("axios"),app=express(),PORT=3e3;app.use(express.json()),app.get("/api/restaurant",function(t,r){var a,n,s,o,c,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.query,n=a.cuisine,s=a.lat,o=a.lng,n&&s&&o){e.next=3;break}return e.abrupt("return",r.status(400).json({error:"Необходимы параметры cuisine, lat и lng."}));case 3:return e.prev=3,e.next=6,regeneratorRuntime.awrap(axios.get("https://nominatim.openstreetmap.org/search",{params:{q:"".concat(n," restaurant"),format:"json",lat:s,lon:o,limit:5,addressdetails:1}}));case 6:if(0===(c=e.sent).data.length)return e.abrupt("return",r.status(404).json({error:"Рестораны не найдены."}));e.next=9;break;case 9:u=c.data.map(function(e){return{name:e.display_name,address:e.address,lat:e.lat,lon:e.lon,link:"https://www.openstreetmap.org/?mlat=".concat(e.lat,"&mlon=").concat(e.lon,"#map=16/").concat(e.lat,"/").concat(e.lon)}}),r.json(u),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("Ошибка при поиске:",e.t0),r.status(500).json({error:"Ошибка сервера."});case 17:case"end":return e.stop()}},null,null,[[3,13]])}),app.listen(PORT,function(){return console.log("Сервер запущен на http://localhost:".concat(PORT))});
//# sourceMappingURL=script.min.js.map
